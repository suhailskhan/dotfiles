#!/usr/bin/env python

# Preserves the 'model' field from the existing target file.

import sys, json

try:
    current = json.load(sys.stdin)
    model = current.get("model", "opusplan")
except Exception:
    model = "opusplan"

settings = {
    "$schema": "https://json.schemastore.org/claude-code-settings.json",

    "cleanupPeriodDays": 90,
    "model": model,
    "enabledPlugins": {
        "claude-code-setup@claude-plugins-official": True,
        "claude-md-management@claude-plugins-official": True
    }, 
    "env": {
        "DISABLE_TELEMETRY": "1",
        "DISABLE_ERROR_REPORTING": "1",
        "CLAUDE_CODE_DISABLE_FEEDBACK_SURVEY": 1
    }
}
print(json.dumps(settings, indent=2))
